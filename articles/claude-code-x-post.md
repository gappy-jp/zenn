---
title: "CLAUDE.mdに書くだけでClaude CodeからXに投稿できる魔法の仕組み"
emoji: "🚀"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["claude", "ai", "x", "automation", "claude-md"]
published: true
---

# Claude CodeからXにポストができるようになりました！

以下のポストをきっかけに、Claude Code内から直接Xにポストを投稿できる仕組みを作ってみました！

https://x.com/gappy50/status/1938595679586451684

Claude Codeを使って開発をしていると、「この機能を実装できた！」「面白いコードを書けた！」といった成果をすぐにSNSでシェアしたくなりますよね。今回実装した機能により、エディタから離れることなく瞬時にXに投稿できるようになります。

## 使い方

Claude Codeで作業中に、以下のように話しかけるだけでXに投稿できます：


![](/images/claude-code-x-post/prompt.png)

プレビューもしてくれる。

![](/images/claude-code-x-post/preview.png)


ポスト内容も過去のポスト傾向を踏まえて考えてくれます。

## 仕組みの秘密：CLAUDE.mdによる手順書

実は、この機能の実現方法はとてもシンプルです。

**前提条件として、PythonでX APIを使ってポストするコマンドラインツールを事前に作成しています。** その上で、**CLAUDE.mdに手順を詳しく書いておく**ことで、Claude Codeが自動的にその手順を読み取って実行しているのです。

### CLAUDE.mdに書かれている投稿ルール

`CLAUDE.md`には、投稿手順だけでなく、**Grokで分析した個人のポスト傾向**も詳しく記載されています。これにより、Claude Codeはユーザーの文体や好みに合わせたポスト内容を提案できます。

以下のような詳細な手順が記載されています：

````markdown
## Claude Code投稿ルール

ユーザーが「〜をポストして」「〜をツイートして」「〜をXに投稿して」と依頼した場合、
Bashツールを使って以下のコマンドを実行する：

### ツイートの投稿
```bash
uv run python main.py "ユーザーが指定した投稿内容"
```

### 投稿前プレビュー機能
**重要**: ユーザーから投稿依頼があった場合、いきなり投稿せず必ず以下の手順を踏む：

1. **プレビュー表示**: 投稿予定のツイート内容を表示
2. **文字数チェック**: 140文字以内であることを確認・表示  
3. **ユーザー確認**: 「この内容で投稿しますか？(y/n)」と確認
4. **承認後実行**: ユーザーが承認した場合のみ実行
````

### Claude Codeがこの手順書を活用する流れ

1. **ユーザーからの投稿リクエスト**
   - 「〜をXに投稿して」という指示を受ける

2. **CLAUDE.mdを参照**  
   - Claude Codeが自動的にCLAUDE.mdの内容を読み取る
   - 投稿ルールに従った手順を確認

3. **プレビュー表示**
   - 手順書に従い、まず投稿内容をプレビュー表示
   - 文字数チェックを実行

4. **ユーザー承認待ち**
   - 「この内容で投稿しますか？」と確認を求める

5. **Bashツールでコマンド実行**
   - 承認後、手順書に記載されたコマンドを実行
   - `uv run python main.py "投稿内容"`

6. **結果報告**
   - 投稿成功時は、ツイートのURLを表示

## CLAUDE.mdの威力

この仕組みの素晴らしい点は、**Claude Codeに「何をすべきか」を明確に教えている**ことです：

- ✅ **手順が明確**: どのコマンドを実行すべきかが具体的に記載
- ✅ **安全性確保**: プレビュー機能で誤投稿を防止  
- ✅ **柔軟性**: 単一ツイートとスレッド投稿の両方に対応
- ✅ **保守性**: 手順を変更したい場合はCLAUDE.mdを編集するだけ
- ✅ **パーソナライズ**: Grokで分析した個人のポスト傾向により、ユーザーらしい文体で投稿を提案

## 他の活用例も可能

この「CLAUDE.mdに手順書を書く」アプローチは、X投稿以外にも応用できます：

- **Slack投稿**: Slack APIを使った投稿手順
- **GitHub操作**: Issue作成やPR作成の自動化手順  
- **デプロイ作業**: 本番環境へのデプロイ手順
- **テスト実行**: 各種テストコマンドの実行手順

## まとめ

Claude CodeからX投稿機能は、特別な統合機能ではなく、**CLAUDE.mdという手順書**によって実現されています。

Claude Codeの「ドキュメントを読んで理解し、適切なツールを実行する」という能力を活用することで、複雑な外部連携も簡単に実現できるのです。

この手法を使えば、あなたのプロジェクトでも様々な自動化が可能になります。ぜひCLAUDE.mdを活用してみてください！

## 追伸

この記事自体も、Claude Codeを使って執筆しました。記事の構成から内容まで、すべてClaude Codeとの対話によって作成されています。Claude Codeの強力な文章作成能力を実感できる一例でもありますね！